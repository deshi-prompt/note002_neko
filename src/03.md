基本設計は概念設計で考えた機構や構成をより具体化し、設計パラメータを決めるフェーズである。
まずは、概念設計で考えた構成の課題を抽出しよう。
次に、抽出した課題を解決するためのアクションアイテムを決めよう。
アクションアイテムをこなしたら、次の詳細設計へ繋げることができるよう結果を整理しておこう。


# 課題を抽出し、アクションアイテムを決めよう！

筆者が考えた構成の課題とアクションアイテムを下記に示す。
主に、3Dプリンタでの部品作成とアーム周りに着目した。

1. アームの設計パラメータ：相手機体を持ち上げることが可能で、高さ200mm地点を通過できるようにアームの設計パラメータ（アーム位置、アーム部品長、リンク比、モータ個数、減速比、等）を計算から決定する
1. アーム部品の強度：3Dプリンタによる部品で相手機体を持ち上げた時、破損しないように強度計算を行い、部品厚みを決定する
1. 積層方向の割れ防止構成：3Dプリンタ積層方向に高負荷がかかると割れが発生しやすい。積層方向に力がかかる部品に関しては強度アップ構成を考える。
1. モータ出力部の削れ防止構成：モータ出力部と締結する3Dプリンタ部品が削れ、駆動伝達できなくなるリスクがある。信頼性の高い締結構成を考える。
1. 大型部品の作成方法：3Dプリンタで作成できる部品サイズは、プリンタのテーブルサイズで決まる。大型部品の分割方法と締結方法を考える。


# アクションアイテムをこなす！

## アームの設計パラメータ

### 目標値設定  

アームに限らず、設計パラメータを計算で決めるためには目標値が必要となる。
目標が無ければ計算結果をどのように扱ってよいか分からないため、暫定でもよいので初期から目標値を設定して進めよう。
もちろん計算に基づいて機体を作った後に、目標値が適切では無かったことが判明することもあるだろうが、その都度修正していけばよい。
計算結果と実際にモノを作り動かした結果との比較を行うことで、次回の設計へフィードバックすることもできるようになるだろう。  
　  
尚、筆者は下記のような目標値設定をした。

* アームの射程距離：作用点位置を機体前面から250mmと設定した
* 相手機体持ち上げ高さ：大会規格の200mm地点を通過するように設定した
* 相手機体持ち上げ力：3500g（機体重量の大会規格）を持ち上げることを目標とした
 
 
### 計算方法  

上記に挙げた項目は相互に影響しあうため、独立して一つ一つを計算することが難しい。
例えば、アームの射程距離を短くすれば必要なモータ駆動力は少なくてよいが、アーム作用点の通過高さは低くなる。
一方で、アームの射程距離を長くすると必要なモータ駆動力も多く必要となり、アーム作用点の通過高さは高くなる。
そこで、筆者はアームリンク機構の位置、クランク長さ、モータ個数、減速比を変数として上記項目を一度に確認できるツールをExcelで作成した。このツールを用いてアームの設計パラメータを決定した。

### 計算モデル  

図3.1を用いて、計算モデルを説明する。

* アームに駆動を与えるポイントを原点Oに設定
* 第1クランク部品の長さをL1とし、第2クランク部品の長さをL2と設定
* 第1クランク部品と第2クランク部品の接続ポイントを中間自由回転軸aに設定
* 第2クランク部品に設けた長穴と摺動するポイントを中間固定軸jに設定
* 作用点をcと設定し、作用力を計算から算出
* 駆動力の伝達力損失は無視

![アーム 計算モデル](fig/fig05.eps)

### 計算結果とパラメータ設定

計算結果は下記の通り。詳細は図3.2を参照。

* アームの射程距離：作用点位置は機体前面から250mm
* 相手機体持ち上げ高さ：大会規格の200mm地点を通過
* 相手機体持ち上げ力：作用点で4208gfの力が出る（3500gf以上）

![アーム 計算結果](fig/fig07.eps)

上記結果となったときの設計パラメータは図3.3の通り。

![アーム 設計パラメータ](fig/fig06.eps)




## アーム部品の強度
  
### 目標値設定  

かわさきロボット競技大会では相手機体とぶつかるアーム部に最も強い力が加わる。
今回、筆者は下記のような目標値設定をした。

* アーム強度：作用点に3500g（機体重量の大会規格）が加わったときに破壊しないこと

### 計算モデル 

図3.4を用いて計算モデルを説明する。尚、部品名称は図3.1と同様。

* 中間自由回転軸aを固定端と設定
* 作用点に3500gfが加わるように設定
* アームの作用点に力が加わったときの第2クランク部品が中間固定軸から受ける力を計算
* 片持ち梁モデル計算からアームに加わる曲げ応力を計算
*  安全率は1.5、 材料強度はABSの30%と想定（3Dプリンタ樹脂充填率）して許容応力を計算

![強度計算モデル ](fig/fig08.eps)


### 計算結果とパラメータ設定

計算結果は下記の通り。詳細は図3.5を参照。

* アームに加わる曲げ応力最大値：約500gf/mm^2^ （許容曲げ応力以下：約515gf/mm^2^ 以下）

![強度 計算結果](fig/fig09.eps)

上記結果となったときの設計パラメータは図3.6の通りで、部品幅を32mm以上、厚みを23mm以上とすればよい。

![強度 設計パラメータ](fig/fig10.eps)

### 残アクションアイテム：計算と実際の挙動の比較

計算と実際の現象には大概ズレが発生する。
特に3Dプリンタで作成する部品は、中空構造になる（筆者の所有する3Dプリンタでは自動的にハニカム形状の中空構造にされる）ため、中実の部品と比較して強度が弱くなる。尚、本強度計算においては、強度が弱くなっていることを表現するために「材料強度をABSの30%と想定」しているがこの値には明確な根拠は無い。  
そのため、本来であれば計算と実際の現象の同定を取るところまで行うほうがよい。
計算と実物の現象の同定を取ることができれば、破壊が発生しないギリギリのラインで設計を行うことができるため、機体の小型・軽量化を行うことが可能となる。また、他の部分を設計する場合に計算の転用をすることもできるようになるだろう。  今回は日程上行うことができなかったため、同定を取る方法案を記載しておく。

### アーム部品強度の計算と実際の挙動の同定を取る方法（案）

* 厚みだけを振った板材（例えば、2mm / 3mm/ 4 mm）を3Dプリンタで作成
* 想定している作用点上に、破壊が発生するまで徐々に力を加える
* 破壊が発生した値と計算値を比較する（3点ほど取れば傾向の比較もできるだろう）
* 計算値と挙動にズレが無ければ、計算結果をそのまま使用すればよい
* 絶対値はずれているが、傾向が合っている場合は適切な係数をかけて使用すればよい
* 絶対値も傾向もズレている場合は計算方法そのものを見直す
 
![同定を取る方法](fig/fig11.eps)


## 積層方向の割れ防止構成
FDM（Fused Deposition Modeling）形式の3Dプリンタで作成された部品は積層方向に対する力に弱い。
熱可塑性の樹脂を溶かしながら一層ずつ形状を作り上げていくため、積層界面の接着状況に強度が左右される。  

### 3Dプリンタ（FDM方式）の弱点

図3.8にFDM形式3Dプリンタの部品作成の様子を示す。
テーブル上に積層された樹脂は、積層直後から冷却され始める。
部品が大きければ大きいほど次の積層までのタイムラグが大きくなり、溶融している樹脂との温度差が大きくなる。また、冷却具合は環境温度にも左右される。

![3Dプリンタ（FDM方式） 部品作成の様子](fig/fig12.eps)

### 対策案
上記のような積層方向に対する割れに関しては、外乱の影響が大きいため机上計算することは困難である。 
  　
そこで、積層方向に対して大きな力が加わる部品に関しては、できる限り破壊のリスクを減らすため図3.9に示す構成を取ることとした。
まず積層方向に対して力が加わる側の部品Aを中空形状とする。
次に積層方向を90°変更した補強部品Bを別途作成し、部品Aの中空部に圧入する。
この構成を取ることにより、積層方向に対して力が加わったとしても部品Bが力を受けてくれるため破壊しにくくなる。

![積層方向 強度アップ構成](fig/fig13.eps)


## モータ出力部の削れ防止構成
駆動構成のシンプル化のため、本機体の脚部・アーム部の駆動モータにタミヤのギアドモータ380K\cite{tamiya_380k}を採用することにした。
　  
ここで、ギアドモータの出力部はDカットされた出力軸から駆動を伝達する必要がある。
ギアドモータの出力軸径はφ6mmと細いため、直接3Dプリンタで作成した部品へ駆動を伝達すると図3.10のようにDカット部で削れが生じる。削れが進行すると、最悪駆動伝達ができなくなる恐れがある。

![積層方向 強度アップ構成](fig/fig14.eps)

そこで、モータ出力を受け取る部分に関しては、金属（今回はアルミ）で部品を作成することとする。
この金属部品から3Dプリンタで作成した部品へ駆動を伝達することで、モータ出力部の削れを防止する。


## 大型部品の作成方法
3Dプリンタはテーブルサイズ以上のサイズの部品は作ることができない。
筆者の所有している3Dプリンターは「Maker Bot社のReplicator 2X \cite{replicator2x}」であるが、そのテーブルサイズは246mm×152mm×155mmである。
一方、かわさきロボット競技大会のサイズ規格は幅250mm×奥行350mm×高さ700mm（停止時）である。    　
そこで、テーブルサイズ以上の部品を作るための構成を考えた。

* 複数部品を嵌め合わせて大型部品を構成
* 強度確保のため厚みを十分に確保
* はめ込み形状を利用して部品同士を結合させる
* ねじれにも強いはめ込み形状

実施例詳細は、詳細設計で説明する。


# その他の基本設計

かわさきロボットを作成するためには、上記項目の他にも下記のようなアクションアイテムをこなす必要があるだろう。取りたい構成に応じて基本設計内容を見直し、早い段階で課題とアクションアイテムを整理することが大事である。

* 脚部構成：素早く動くためのリンク比とモータ個数/減速比計算
* 復帰構成：転倒時の復帰構成
* 高メンテナンス性確保l構成：迅速な修理・交換作業ができるようにメンテナンス性のよい構成を考える
